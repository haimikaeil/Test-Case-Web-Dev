/**
 * *******************************************************
 * geomapify - Ultimate library for google maps autocomplete
 * version: 1.0
 * Coded by ADFDEV - https://adfdev.it/
 * GitHub: https://github.com/adfdev/geomapify/
 * *******************************************************
 */
!function(g){var t="geomapify: Google Maps API KEY not found!";g.fn.geomapify=function(e){var c=g.extend({apiKey:null,containerInputs:"#containerInputsGoogleMaps",mapCanvas:"#mapCanvasGoogleMaps",startPosition:null,markerOnStartPosition:!1,filledFieldsOnStartPosition:!1,fieldAttr:"google-maps-field",draggable:!0,createJSON:!0,hideMap:!0,editFieldsAfterFilled:!1,editJSONonManualInput:!1,autocompleteOnEmptyCleanFields:!1,canvas:{zoom:16,gestureHandling:"cooperative"},callbacks:{filledFields:function(){},markerDragged:function(){},createJSON:function(){},googleMapsScriptLoaded:function(){}},componentForm:{street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"long_name",administrative_area_level_2:"short_name",country:"long_name",postal_code:"short_name"},jsonNamesKeys:{}},e);if(""==c.apiKey||null==c.apiKey||null==c.apiKey)alert(t),console.log(t),g(c.containerInputs).remove(),g(this).remove();else{c.autocompleteField=g(this);var p={initAutocomplete:function(){if(autocomplete=new google.maps.places.Autocomplete(c.autocompleteField[0],{types:["geocode"]}),autocomplete.addListener("place_changed",p.fillInAddress),c.autocompleteField.focus(function(){p.geolocate(),1==c.editFieldsAfterFilled&&g(c.containerInputs).find("["+c.fieldAttr+"]").not("["+c.fieldAttr+'="json"]').prop("readonly",!0)}),1==c.autocompleteOnEmptyCleanFields&&c.autocompleteField.keyup(function(){g(c.containerInputs).find("["+c.fieldAttr+"]").val("")}),1==c.hideMap&&null!=c.startPosition){var e=c.startPosition.split(","),t=new google.maps.LatLng(e[0],e[1]);c.canvas.center=t;var a=new google.maps.Map(g(c.containerInputs).find(c.mapCanvas)[0],c.canvas);1==c.markerOnStartPosition&&new google.maps.Marker({position:t,draggable:c.draggable,map:a}),1==c.filledFieldsOnStartPosition&&p.reverseDecode(c.containerInputs,e[0],e[1])}},geolocate:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude},a=new google.maps.Circle({center:t,radius:e.coords.accuracy});autocomplete.setBounds(a.getBounds())})},fillInAddress:function(e){var t=c.componentForm;if(null==e)e=autocomplete.getPlace();for(var a=0;a<e.address_components.length;a++){var n=e.address_components[a].types[0];if(t[n]){var o=e.address_components[a][t[n]];g(c.containerInputs).find("["+c.fieldAttr+'="'+n+'"]').val(o)}}if(1==c.hideMap){var i=e.geometry.location.lat(),l=e.geometry.location.lng(),r=new google.maps.LatLng(i,l);c.canvas.center=r;var s=new google.maps.Map(g(c.containerInputs).find(c.mapCanvas)[0],c.canvas),d=new google.maps.Marker({position:r,draggable:c.draggable,map:s});g(c.containerInputs).find("["+c.fieldAttr+'="latitude"]').val(i),g(c.containerInputs).find("["+c.fieldAttr+'="longitude"]').val(l),1==c.draggable&&google.maps.event.addListener(d,"dragend",function(e){var t=this.getPosition().lat(),a=this.getPosition().lng();g(c.containerInputs).find("["+c.fieldAttr+'="latitude"]').val(t),g(c.containerInputs).find("["+c.fieldAttr+'="longitude"]').val(a),c.callbacks.markerDragged(),p.reverseDecode(t,a)})}1==c.createJSON&&p.createJSON(),1==c.editFieldsAfterFilled&&(g(c.containerInputs).find("["+c.fieldAttr+"]").not("["+c.fieldAttr+'="json"]').prop("readonly",!1),1==c.editJSONonManualInput&&g(c.containerInputs).find("["+c.fieldAttr+"]").not("["+c.fieldAttr+'="json"]').keyup(function(){p.createJSON()})),c.callbacks.filledFields()},reverseDecode:function(e,t){var a={lat:parseFloat(e),lng:parseFloat(t)};(new google.maps.Geocoder).geocode({location:a},function(e,t){"OK"===t&&e[0]&&(p.fillInAddress(e[0]),c.autocompleteField.val(e[0].formatted_address))})},createJSON:function(){var e=[],t={};t.formatted_address=c.autocompleteField.val(),g(c.containerInputs).find("["+c.fieldAttr+"]").each(function(){var e=g(this).attr(c.fieldAttr);"json"!=e&&(c.jsonNamesKeys.hasOwnProperty(e)&&(e=c.jsonNamesKeys[e]),t[e]=g.trim(g(this).val()))}),e.push(t);var a={};a.geomapify=e,json=JSON.stringify(a),g(c.containerInputs).find("["+c.fieldAttr+'="json"]').val(json),c.callbacks.createJSON()}};g.getScript("https://maps.googleapis.com/maps/api/js?key="+c.apiKey+"&libraries=places",function(e,t,a){p.initAutocomplete(),c.callbacks.googleMapsScriptLoaded()})}}}(jQuery);
